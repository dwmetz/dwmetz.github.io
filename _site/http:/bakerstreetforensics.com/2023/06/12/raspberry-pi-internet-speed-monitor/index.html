<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Raspberry Pi Internet Speed Monitor | BakerStreetForensics</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Raspberry Pi Internet Speed Monitor" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="None" />
<meta property="og:description" content="None" />
<link rel="canonical" href="http://localhost:4000/http:/bakerstreetforensics.com/2023/06/12/raspberry-pi-internet-speed-monitor/" />
<meta property="og:url" content="http://localhost:4000/http:/bakerstreetforensics.com/2023/06/12/raspberry-pi-internet-speed-monitor/" />
<meta property="og:site_name" content="BakerStreetForensics" />
<meta property="og:image" content="https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8272.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-06-12T16:20:39-04:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8272.jpeg" />
<meta property="twitter:title" content="Raspberry Pi Internet Speed Monitor" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-06-13T06:38:14-04:00","datePublished":"2023-06-12T16:20:39-04:00","description":"None","headline":"Raspberry Pi Internet Speed Monitor","image":"https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8272.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/http:/bakerstreetforensics.com/2023/06/12/raspberry-pi-internet-speed-monitor/"},"url":"http://localhost:4000/http:/bakerstreetforensics.com/2023/06/12/raspberry-pi-internet-speed-monitor/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="BakerStreetForensics" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">BakerStreetForensics</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Raspberry Pi Internet Speed Monitor</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-06-12T16:20:39-04:00" itemprop="datePublished">Jun 12, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I was looking wistfully at the Lack Rack from my arm chair, admiring the (faux) copper conduit that covered the primary inbound internet link to the switch. I thought it would be cool looking to have an antique steam gauge attached to the piping. Two things caused that idea to quickly change - 1. the going prices for antique steam gauges right now, 2. once I was thinking about it as a gauge I thought an ‘internet speed gauge’ would be perfect. Alas, even if said gauge could be acquired without breaking the bank, converting MBPS to PSI and making it functional is above my level of engineering. So on to the next best thing - a Raspberry Pi hack.</p>

<h2 id="materials-"><strong>Materials</strong> :</h2>

<ul>
  <li>Raspberry Pi (3 or 4) with Raspbian 32-bit OS</li>
  <li>Case with 3.5 in LCD Display</li>
  <li>Copper spray paint ;)</li>
  <li>Attention to detail at the command line</li>
</ul>

<h2 id="speedtest-cli">Speedtest CLI</h2>

<p>Once you’ve got your Raspberry Pi up and running start with the <strong>Installing the Speedtest CLI</strong> instructions at <a href="https://pimylifeup.com/raspberry-pi-internet-speed-monitor/">https://pimylifeup.com/raspberry-pi-internet-speed-monitor/</a>. Complete steps <strong>1-6.</strong> When the article gets to <strong>Writing our Speed Test Python Script</strong> , you can skip that section.<em>I do recommend it from a learning perspective, but the code from that step won’t be used in the final project</em>.</p>

<p>Assuming this is a new installation, you will need to install <strong>InfluxDB</strong> and <strong>Grafana</strong>. Complete the respective instructions for each.</p>

<ul>
  <li>Installing InfluxDB: <a href="https://pimylifeup.com/raspberry-pi-influxdb/">https://pimylifeup.com/raspberry-pi-influxdb/</a></li>
  <li>Setting up Grafana: <a href="https://pimylifeup.com/raspberry-pi-grafana/">https://pimylifeup.com/raspberry-pi-grafana/</a></li>
</ul>

<p>Continue with the primary article’s instructions for <strong>Using Grafana to Display your Speedtest Data</strong>.</p>

<p>If you’ve made it along this far, you should have a working Grafana dashboard displaying Upload Speed, Download Speed, and Ping (Latency). If you’re hitting a glitch - go back through what you’ve coded and double check that any references to the user (default = Pi) are accurate for the user on your device. You should be seeing updated data based on the frequency you specified in <strong>crontab -e</strong>.</p>

<p><img src="https://bakerstreetforensics.com/wp-content/uploads/2023/06/screenshot-2023-06-12-at-2.57.16e280afpm.png?w=1024" alt="" /></p>

<h2 id="install-grafana-kiosk">Install Grafana Kiosk</h2>

<p>Next, we want to set up our device as a kiosk, and have it boot and display the Network Speed dashboard automatically.</p>

<p>Install Grafana Kiosk from <a href="https://github.com/grafana/grafana-kiosk">https://github.com/grafana/grafana-kiosk</a>. For my installation I used the <strong><em>ARM v6 grafana-kiosk.linux.armv6</em></strong> release.</p>

<h2 id="running-the-dashboard-on-startup">Running the Dashboard on startup:</h2>

<p>We’re going to use a yaml file to store our dashboard configuration:</p>

<p>Create a new file, <strong>config.yaml</strong> and populate it as such:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>general:
  kiosk-mode: full
  autofit: true
  lxde: true
  lxde-home: /home/(user)
target:
  login-method: local
  username: admin
  password: (password)
  playlist: false
  URL: http://localhost:3000/d/bdf20d32-c4ff-4578-a3f4-7a38e1f722b9/network-speed?orgId=1
  ignore-certificate-errors: false
</code></pre></div></div>

<p><strong>Be sure to substitute the proper ID wherever you see (user).</strong> The <strong>URL</strong> for the dashboard can be copied from the web interface of the dashboard.</p>

<p>Edit<strong>/home/(user)/.config/lxsession/LXDE-pi/autostart</strong></p>

<p>Add a line: <em>(one line, may show as wrapped)</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@/usr/bin/grafana-kiosk -lxde-home /home/(user) -c /home/(user)/config.yaml
</code></pre></div></div>

<p>Save &amp; Exit.</p>

<p>Now when you reboot the Pi, the dashboard should come up full screen after login.</p>

<p><img src="https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8273.jpeg?w=768" alt="" /> <img src="https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8272.jpeg?w=768" alt="" /> <img src="https://bakerstreetforensics.com/wp-content/uploads/2023/06/img_8271.jpeg?w=768" alt="" /></p>

  </div><a class="u-url" href="/http:/bakerstreetforensics.com/2023/06/12/raspberry-pi-internet-speed-monitor/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">BakerStreetForensics</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">BakerStreetForensics</li><li><a class="u-email" href="mailto:dwmetz@gmail.com">dwmetz@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/dwmetz"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">dwmetz</span></a></li><li><a href="https://www.twitter.com/dwmetz"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">dwmetz</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Where Irregulars Are Part of the Game</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
